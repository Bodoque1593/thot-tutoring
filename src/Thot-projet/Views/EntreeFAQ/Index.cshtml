@model IEnumerable<Thot_projet.Models.EntreeFAQ>
@{
    ViewBag.Title = "Foire aux questions";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var isTuteur = string.Equals(Convert.ToString(Session["UserRole"] ?? ""), "Tuteur", StringComparison.OrdinalIgnoreCase);
}

<div class="page-head">
    <h2>Foire aux questions</h2>
    <small>Questions fréquentes sur la plateforme Thot</small>
    <hr class="soft-hr" />
</div>

@if (isTuteur)
{
    <p>@Html.ActionLink("Ajouter une entrée", "Create", null, new { @class = "btn btn-thot-primary" })</p>
}

@if (Model == null || !Model.Any())
{
    <div class="thot-card">
        <p class="thot-help"><em>Aucune entrée pour le moment.</em></p>
    </div>
}
else
{
    <div class="panel-group" id="faq">
        @foreach (var f in Model.OrderByDescending(x => x.PublieLe))
        {
            var anchorId = "f" + Convert.ToString(f.id);
            <div class="panel panel-default">
                <div class="panel-heading" style="background-color:#020617;border-color:#1f2937;">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#faq" href="#@anchorId" style="color:#e5e7eb;">
                            @f.QuestionTexte
                            <span class="label label-default" style="margin-left:6px;">
                                @f.PublieLe.ToString("yyyy-MM-dd")
                            </span>
                        </a>
                    </h4>
                </div>
                <div id="@anchorId" class="panel-collapse collapse">
                    <div class="panel-body" style="background-color:#020617;color:#e5e7eb;">
                        @Html.Raw((f.ReponseTexte ?? "").Replace("\n", "<br/>"))
                        @if (isTuteur)
                        {
                            <div style="margin-top:10px;">
                                @Html.ActionLink("Modifier", "Edit", new { id = f.id }) |
                                @Html.ActionLink("Supprimer", "Delete", new { id = f.id })
                            </div>
                        }
                    </div>
                </div>
            </div>
        }
    </div>
}

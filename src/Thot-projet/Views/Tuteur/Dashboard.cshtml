@model Thot_projet.Models.TuteurDashboardVM
@{
    ViewBag.Title = "Tableau du tuteur";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>Tableau du tuteur</h2>

<div class="row">
    <div class="col-md-6">
        <h3>Questions non résolues (Top 10)</h3>
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Étudiant</th>
                    <th>Cours</th>
                    <th>Ressource</th>
                    <th>Créée le</th>
                    <th>Extrait</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var q in Model.QuestionsOuvertes)
                {
                    <tr>
                        <td>@(q.Etudiant != null ? q.Etudiant.Nomcomplet ?? q.Etudiant.Email : "-")</td>
                        <td>@(q.Cours != null ? q.Cours.Nom : "-")</td>
                        <td>@(q.Ressource != null ? q.Ressource.Titre : "-")</td>
                        <td>@q.Creele.ToString("yyyy-MM-dd HH:mm")</td>
                        <td>@(string.IsNullOrWhiteSpace(q.Contenu) ? "-" : (q.Contenu.Length > 60 ? q.Contenu.Substring(0, 60) + "..." : q.Contenu))</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <div class="col-md-6">
        <h3>Mes sessions de clavardage (Top 10)</h3>
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Étudiant</th>
                    <th>Début</th>
                    <th>Fin</th>
                    <th>Durée (min)</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var s in Model.MesChats)
                {
                    <tr>
                        <td>@(s.Etudiant != null ? s.Etudiant.Nomcomplet ?? s.Etudiant.Email : "-")</td>
                        <td>@s.DemarreLe.ToString("yyyy-MM-dd HH:mm")</td>
                        <td>@(s.TermineLe.HasValue ? s.TermineLe.Value.ToString("yyyy-MM-dd HH:mm") : "-")</td>
                        <td>@s.DureeMinutes</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@model IEnumerable<Thot_projet.Models.Cours>
@{
    ViewBag.Title = "Liste des cours";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var role = Convert.ToString(Session["UserRole"] ?? "");
    var isTuteur = string.Equals(role, "Tuteur", StringComparison.OrdinalIgnoreCase);
}

<div class="page-head">
    <h2>Liste des cours</h2>
    <small>Gérez le catalogue de formation Thot</small>
    <hr class="soft-hr" />
</div>

@if (isTuteur)
{
    <p>
        @Html.ActionLink(
            "Créer un nouveau cours",
            "Create",
            null,
            new { @class = "btn btn-thot-primary" })
    </p>
}

<div class="thot-card">
    <table class="table table-striped table-bordered" style="margin-bottom:0;">
        <thead>
            <tr>
                <th>Nom</th>
                <th>Niveau</th>
                <th style="width:220px;">Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var c in Model)
            {
                <tr>
                    <td>@c.Nom</td>
                    <td><span class="thot-badge">@c.Niveau</span></td>
                    <td>
                        @if (isTuteur)
                        {
                            @Html.ActionLink("Détails", "Details", new { id = c.id }, new { @class = "btn btn-info btn-xs" }) @: |
                            @Html.ActionLink("Modifier", "Edit", new { id = c.id }, new { @class = "btn btn-warning btn-xs" }) @: |
                            @Html.ActionLink("Supprimer", "Delete", new { id = c.id }, new { @class = "btn btn-danger btn-xs" })
                        }
                        else
                        {
                            @Html.ActionLink("Voir", "Details", new { id = c.id }, new { @class = "btn btn-thot-ghost btn-xs" })
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
